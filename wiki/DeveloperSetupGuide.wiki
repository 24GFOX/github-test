#summary Instructions for how to set up a build environment for Omaha

= Introduction =

These instructions are intended to assist the would-be Omaha developer with setting up an environment in which to successfully build the Omaha source code.


= Required Downloads =

The following packages are required to build Omaha:
  * Omaha source code
    * You can either:
      * Download a full source package from the [http://code.google.com/p/omaha/downloads/list Downloads area].
      * See [http://code.google.com/p/omaha/source/checkout source checkout] for setting up access to the subversion repository.
  * Microsoft Visual C++
    * You will need to have at least the Standard Edition of Visual C or Visual Studio. (Note: the Express Editions are not sufficient, because they do not include ATL/MFC, which Omaha requires.)
  * Microsoft Vista SDK
    * You can get the SDK from [http://www.microsoft.com/downloads/details.aspx?FamilyID=4377f86d-c913-4b5c-b87e-ef72e5b4e065&displaylang=en here].
  * Microsoft .NET Framework 2.0
    * This is pre-installed on Windows Vista machines, but if you're running XP, then download it [http://msdn.microsoft.com/en-us/netframework/aa731542.aspx here].
  * WTL
    * You can get WTL from [http://www.microsoft.com/downloads/details.aspx?FamilyID=1be1eb52-aa96-4685-99a5-4256737781c5&displaylang=en here].
  * WiX
    * Download any of the v3 binaries packages [http://sourceforge.net/project/showfiles.php?group_id=105970&package_id=168888 here].
  * Python 2.4 or greater (but not Python 3 or above!)
    * Download Python from [http://www.python.org/download/ here].
    * You'll also need the [http://sourceforge.net/projects/pywin32 pywin32 extensions].
  * SCons
    * Download this from [http://www.scons.org/download.php here].
  * Software Construction Toolkit
    * Get this [http://code.google.com/p/swtoolkit/ here].


= Details =

== Installation ==

Install each of the above software packages that comes with an installer, which is all of them except Omaha and the Software Construction Toolkit.

Follow the swtoolkit [http://code.google.com/p/swtoolkit/wiki/Introduction installation instructions]. Make sure you don't miss the part about setting up the SCONS_DIR environment variable.

Extract or checkout the Omaha source code to a directory of your choice, perhaps something like "C:\Omaha-Dev"


== Environment Variables ==

Create the following environment variables:
  * %SCT_DIR% - set to the directory of the Software Construction Toolkit (eg. `C:\swtoolkit`)
  * %OMAHA_NET_DIR% - This will depend on your OS:
    * For XP, set it to the directory where the .NET framework is installed (eg. `C:\Program Files\Microsoft.NET\Framework\v2.0.50727`)
    * For Vista, set it to the pre-installed framework directory (this will be something like: `C:\Windows\Microsoft.NET\Framework\v2.0.50727`)
  * %OMAHA_PYTHON_DIR% - set to the directory where python was installed. This directory should contain python.exe. (eg. `C:\python_24`)
  * %OMAHA_VISTASDK_DIR% - set to the directory where the Vista SDK was installed (e.g. `C:\Program Files\Microsoft Visual Studio 9.0\VC\PlatformSDK`)
  * %OMAHA_WIX_DIR% - set to the directory where WiX was installed (eg. `C:\Program Files\WiX`)
  * %OMAHA_WTL_DIR% - set to the directory where WTL was installed (eg. `C:\Program Files\WTL`)


== Conclusion ==

Once the above setup is complete:
  # Open a fresh cmd.exe window (if you're running under Vista, make sure cmd.exe is running as Administrator)
  # Navigate to the 'Omaha-Dev' directory, or whatever you called it.
  # From the above directory, just type `hammer` to build Omaha! (Note: more advanced Hammer options can be found [HammerOptions here].)